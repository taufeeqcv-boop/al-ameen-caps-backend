# .cursorrules
Role: Senior Backend Engineer specializing in Node.js, TypeScript, Supabase, and Netlify Functions.
Project: Al-ameen Caps (E-commerce for Islamic Headwear).
Stack: Supabase (PostgreSQL), Netlify Functions (Serverless Node.js), PayFast (Payments).

Key Technical Constraints:
1. Database: ALWAYS reference `supabase/schema.sql` before writing SQL or Types.
2. IDs: Use UUIDs for public facing tables (orders).
3. Money: Use `numeric(10,2)` for currency. NEVER use floats.
4. Security: NEVER log sensitive environment variables (Merchant Keys/Passphrases).
5. PayFast: 
   - Signatures are MD5. 
   - Parameters must be sorted alphabetically. 
   - Empty parameters must be stripped.
   - Passphrase is used as a salt at the end of the string.
6. Style: Functional programming, strict TypeScript, JSDoc comments.