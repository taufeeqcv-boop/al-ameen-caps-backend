# Google Merchant Center – Search Shopping tab

To get products on the Search Shopping tab for alameencaps.com, add a product feed in Google Merchant Center.

## Google Tag Manager verification

When Google says “Your Google tag wasn’t detected”:

1. **Use the apex URL for the test:** Run “Test your website” (or tag detection) on **https://alameencaps.com** (no `www`). The site redirects `www` → apex, so testing `www.alameencaps.com` can hit the redirect and not the full HTML where GTM is.
2. **Publish the GTM container:** In [Google Tag Manager](https://tagmanager.google.com), open your container (e.g. GTM-M8S7HCWM) and click **Submit** → **Publish** so the container is live.
3. **Redeploy:** After adding or changing GTM in `index.html`, push and deploy so the live site serves the updated page.

The GTM snippet is in `index.html` (script in `<head>`, noscript right after `<body>`).

### Tag Assistant debug session

To share a debug session: in [Tag Assistant](https://tagassistant.google.com/), enter **https://alameencaps.com**, choose tags to debug, then copy the shareable link. Example format:

- **Domain URL with debug param:** `https://alameencaps.com/?gtm_debug=<timestamp>`
- **Shareable debug link:** `https://tagassistant.google.com/#/?url=https%3A%2F%2Falameencaps.com%2F%3Fgtm_debug%3D<timestamp>`

Anyone opening the shareable link can debug the chosen tags on the site.

## Feed file and URL

- **Local file:** `public/product-feed.xml` (generated by `npm run build` or run `node scripts/generate-product-feed.js`).
- **Live URL (after deploy):** https://alameencaps.com/product-feed.xml  
  Format: RSS 2.0 with Google product attributes (`g:` namespace).

### Feed attributes (fixes common diagnostics)

The feed includes these so products pass review in South Africa and United States:

- **age_group:** `adult` (required for apparel/headwear in some countries).
- **gender:** `male` (Islamic headwear target).
- **color:** `Multi` (or add per-product `color` in `src/data/collection.js` if you want specific colors).
- **shipping:** South Africa only — ZA Standard 99.00 ZAR. Adjust in `scripts/generate-product-feed.js` if your rate differs.

After changing the feed, run `node scripts/generate-product-feed.js` (or `npm run build`), deploy, then in Merchant Center run a fetch so the updated feed is processed. **Pending initial review** clears after up to 3 business days.

---

## Option A: Upload the file (manual upload)

1. Go to [Google Merchant Center](https://merchants.google.com/) and sign in. Select or add your business (alameencaps.com).
2. In the left menu: **Products** → **Feeds** → **Add feed**.
3. Choose **South Africa** as the country of sale, **English** as the language. Click **Continue**.
4. Choose **Upload** (or “Upload file”) as the input method.
5. Enter a feed name (e.g. “Al-Ameen Caps products”).
6. Choose **Scheduled fetch** or **One-time upload** as needed. For upload:
   - Click **Upload file** and select `public/product-feed.xml` from your project (or download it from https://alameencaps.com/product-feed.xml after deploy and upload that file).
7. Save. Run the fetch/upload and wait for processing.
8. Go to **Products** → **Diagnostics** and fix any errors reported.

---

## Option B: Fetch from URL (recommended after deploy)

1. Go to [Google Merchant Center](https://merchants.google.com/) and sign in. Select or add your business (alameencaps.com).
2. **Products** → **Feeds** → **Add feed**.
3. Country of sale: **South Africa**. Language: **English**. Continue.
4. Choose **Website** or **Fetch from URL** and enter:  
   `https://alameencaps.com/product-feed.xml`
5. Save and run a fetch. Google will fetch the feed on the schedule you set.
6. Check **Products** → **Diagnostics** for any errors and fix if needed.

---

## Product images: why they don’t show in search or Shopping

### 1. Image URLs must work (no 404)

The feed uses `g:image_link` like `https://alameencaps.com/collection/nalain-cap.png`. Google and Merchant Center fetch these URLs; if they get **404**, products are rejected or images don’t show.

- **Build step:** `node scripts/copy-collection-images.js` copies images from `src/assets/collection/` to `public/collection/` during `npm run build`, so the live site serves them at `/collection/*.png`.
- **Check:** After deploy, open e.g. https://alameencaps.com/collection/nalain-cap.png in a browser. It must return **200** and show the image (not 404).
- If you add new products, add the image file to `src/assets/collection/` with the same filename as in `src/data/collection.js` (e.g. `nalain-cap.png`), then rebuild and deploy.

### 2. Image size (Merchant Center)

- **Minimum:** 100×100 px.
- **Recommended:** At least **800×800** px (or 800 on the longest side) for better display in Shopping.
- Use square or near-square images where possible.

### 3. Why Merchant products don’t appear when you search

- **Feed approved:** In Merchant Center → **Products** → **Diagnostics**, fix any errors. “Image link returns 404” or “Image too small” will block products.
- **Shopping campaign:** Products in the feed only show in the **Shopping** tab (or Shopping ads) if you have a **Shopping campaign** in Google Ads targeting South Africa (or your country). Create a campaign that uses “Merchant Center” as the product source and the feed you added.
- **Review time:** New feeds can take up to **3 business days** to finish review. Until then, products may show as “Pending” or not at all.

### 4. Why product images don’t show in organic search

- **Product pages indexed:** Use Search Console → URL inspection for e.g. `https://alameencaps.com/product/collection-1` and request indexing if needed.
- **Product schema:** The site outputs Product JSON-LD with `image` (array). Google uses this for rich results; the `image` URL must be the same working URL (e.g. `https://alameencaps.com/collection/nalain-cap.png`).
- **Same image URL everywhere:** Feed, schema, and `og:image` on product pages all point to `/collection/<filename>.png`. Keeping images in `public/collection/` (via the copy script) keeps these consistent.

---

Once the feed is processed and approved **and** image links return 200, products can appear in the Search Shopping tab (with a Shopping campaign) and product images can appear in organic rich results.
